<title>Moriva | Sepetim</title>
<!-- Cart Section -->
<section class="cart-section">
  <div class="container">
    <div class="cart-header">
      <h1><i class="fas fa-shopping-cart"></i> Alışveriş Sepetim</h1>
      <p>
        Sepetinizde
        <span id="cart-count">{{this.common.basketCount()}}</span> ürün
        bulunuyor
      </p>
    </div>

    @if(this.common.basketCount()===0){
    <div>
      <h1 style="width: 100%; text-align: center; margin-bottom: 20px">
        Sepette Ürününüz Bulunmuyor
      </h1>
    </div>
    }@else{
    <div class="cart-content">
      <!-- Cart Items -->
      <div class="cart-items">
        @for(val of common.basketData(); track val._id){
        <div class="cart-item">
          <img [src]="val.productImageUrl" [alt]="val.productName" />
          <div class="item-details">
            <h3>{{val.productName}}</h3>
            <div class="item-actions">
              <button class="remove-btn">
                <i class="fas fa-trash"></i> Kaldır
              </button>
              <button class="save-btn">
                <i class="fas fa-heart"></i> Favorilere Ekle
              </button>
            </div>
          </div>
          <div class="quantity-controls">
            <button class="qty-btn minus" (click)="adetAzalt(val)">-</button>
            <span class="quantity">{{val.quantity}}</span>
            <button class="qty-btn plus" (click)="adetArttir(val)">+</button>
          </div>
          <div class="item-price">
            <span class="price"
              >{{(val.price*val.quantity)| trCurrency:'₺':false}}</span
            >
          </div>
        </div>
        }
      </div>

      <!-- Order Summary -->
      <div class="order-summary">
        <div class="summary-card">
          <h3>Sipariş Özeti</h3>

          <div class="summary-row">
            <span>Ara Toplam:</span>
            <span id="subtotal">{{common.total() | trCurrency:'₺':false}}</span>
          </div>

          <div class="summary-row">
            <span>Kargo:</span>
            <span class="free">Ücretsiz</span>
          </div>

          <div class="summary-row">
            <span>KDV (14%):</span>
            <span id="tax">{{common.kdv() | trCurrency:'₺':false}}</span>
          </div>

          <div class="summary-row">
            <span>İndirim:</span>
            <span id="tax">%{{common.indirimOrani()}}</span>
          </div>


          <hr />

          <div class="summary-row total">
            <span>Toplam:</span>
            <span id="total"
              >{{common.totalWithDiscount()| trCurrency:'₺':false}}</span
            >
          </div>
          <div class="promo-code">
            <input
              type="text"
              [(ngModel)]="this.common.KOD"
              placeholder="Promosyon kodu girin"
            />
            <button (click)="common.applyPromoCode()" class="promo-btn">
              Uygula
            </button>
          </div>

          <button class="checkout-btn" routerLink="/payment">
            <i class="fas fa-lock"></i>
            Güvenli Ödeme
          </button>

          <div class="payment-methods">
            <p>Kabul edilen ödeme yöntemleri:</p>
            <div class="payment-icons">
              <i class="fab fa-cc-visa"></i>
              <i class="fab fa-cc-mastercard"></i>
              <i class="fab fa-cc-amex"></i>
              <i class="fas fa-credit-card"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
    }
    <!-- Recommended Products -->
    <div class="recommended-section">
      <h2>Size Özel Öneriler</h2>
      <div class="recommended-grid">
        <div class="recommended-item">
          <img
            src="https://via.placeholder.com/150x120/6f42c1/ffffff?text=Case"
            alt="iPhone Kılıf"
          />
          <h4>iPhone 15 Pro Kılıfı</h4>
          <span class="rec-price">299 ₺</span>
          <button class="add-rec-btn">Sepete Ekle</button>
        </div>
        <div class="recommended-item">
          <img
            src="https://via.placeholder.com/150x120/fd7e14/ffffff?text=Charger"
            alt="Şarj Aleti"
          />
          <h4>Hızlı Şarj Adaptörü</h4>
          <span class="rec-price">199 ₺</span>
          <button class="add-rec-btn">Sepete Ekle</button>
        </div>
        <div class="recommended-item">
          <img
            src="https://via.placeholder.com/150x120/e83e8c/ffffff?text=Mouse"
            alt="Wireless Mouse"
          />
          <h4>Kablosuz Mouse</h4>
          <span class="rec-price">149 ₺</span>
          <button class="add-rec-btn">Sepete Ekle</button>
        </div>
      </div>
    </div>
  </div>
</section>
